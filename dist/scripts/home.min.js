var getTallies=function(){$.ajax({url:"/api/user/tallies",type:"GET",dataType:"json",success:function(a){$(".tallies ul").html("");for(var b=0;k=a.length,b<k;b++){var c=a[b].color||"#E0E0E0";$(".tallies ul").append('<li data-user="'+a[b].id+'"><span class="user-mark" style="background-color: '+c+'"></span>'+a[b].name+": "+a[b].tally+"</li>")}},error:function(){console.log("error getting tallies")}})},clearWinner=function(a){$.ajax({url:"/api/clear/winner",type:"POST",dataType:"json",data:{category:a},success:function(){getTallies();var b="#"+a;$(b).find("input[type=radio]").removeAttr("checked"),$(b).find(".nominee--info").removeClass("winner loser")},error:function(a){console.log(a),Notifly.create({message:"There was a problem","class":"success",linger:2500,fadeIn:1250,fadeOut:1250})}})};$("form").formjax({success:function(){getTallies()}}),$(".clear-winner").on("click",function(){var a=$(this).data("category");clearWinner(a)}),$(".categories--category h2").on("click",function(){$(this).parent().toggleClass("active")});var prevTallyUser=null;$(".tallies").on("click","li",function(){var a=$(this).data("user");prevTallyUser!=a?($(this).parent().find("li").addClass("inactive"),$(this).removeClass("inactive"),$(".nominee--votes a").addClass("inactive"),$(".nominee--votes").find('[data-user="'+a+'"]').removeClass("inactive"),$(".nominee--favorites a").addClass("inactive"),$(".nominee--favorites").find('[data-user="'+a+'"]').removeClass("inactive"),prevTallyUser=a):($(this).parent().find("li").removeClass("inactive"),$(".nominee--votes a").removeClass("inactive"),$(".nominee--favorites a").removeClass("inactive"),prevTallyUser=null)}),$(".tallies").on("mouseenter","li",function(){var a=$(this).data("user");$(".nominee--votes a").addClass("hoverInactive"),$(".nominee--votes").find('[data-user="'+a+'"]').removeClass("hoverInactive"),$(".nominee--favorites a").addClass("hoverInactive"),$(".nominee--favorites").find('[data-user="'+a+'"]').removeClass("hoverInactive")}),$(".tallies").on("mouseleave","li",function(){$(this).data("user");$(".nominee--votes a").removeClass("hoverInactive"),$(".nominee--favorites a").removeClass("hoverInactive")}),$(".tallies").hover(function(){$(this).addClass("active")},function(){$(this).removeClass("active")}),$(".toggle-switches span").on("click",function(){$(this).hasClass("expand")?$(".categories--category").addClass("active"):$(".categories--category").removeClass("active")}),$("form input").on("change",function(){parentCatId="#"+$(this).data("category"),$(parentCatId).submit(),$(parentCatId).find(".nominee--info").removeClass("winner").addClass("loser"),$(this).parents(".nominee--info").removeClass("loser").addClass("winner")}),getTallies();